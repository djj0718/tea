(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,i=1;i<r.length;i++){var c=r[i];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"0d79":function(e,t,r){},"0e22":function(e,t,r){},"181f":function(e,t,r){},"1b3c":function(e,t,r){},"2cfd":function(e,t,r){"use strict";var a=r("e314"),n=r.n(a);n.a},"376b":function(e,t,r){},"3a12":function(e,t,r){"use strict";var a=r("49bd"),n=r.n(a);n.a},"49bd":function(e,t,r){},"506f":function(e,t,r){"use strict";var a=r("ad9d"),n=r.n(a);n.a},5635:function(e,t,r){e.exports=r.p+"img/c7.5607e5da.jpg"},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=r("5c96"),s=r.n(n),o=(r("0fae"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)}),i=[],c=(r("034f"),r("2877")),u={},l=Object(c["a"])(u,o,i,!1,null,null,null),d=l.exports,m=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("el-container",[r("cheader"),r("el-main",[r("router-view")],1),r("el-footer",[e._v(" 重庆师范大学计算机与信息科学学院16级计算机科学与技术 段金江制作 "),r("br"),e._v(" Copyright © 2019 - "+e._s((new Date).getFullYear())+" Duan Jinjiang. All Rights Reserved. ")])],1)],1)},f=[],g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-header",{attrs:{height:"230px"}},[r("div",{staticClass:"banner-container"},[r("div",{staticClass:"container banner clearfix"},[r("div",{attrs:{id:"logo"}},[r("img",{attrs:{src:e.logo}})]),r("div",{attrs:{id:"title-content"}},[e._v("信阳毛尖销售系统")]),r("div",{attrs:{id:"user-box"}},[e._v(" "+e._s(e.userName)+" "),r("el-button",{on:{click:e.gotoLogin}},[e._v(e._s(e.isLogin?"退出":"登录"))])],1)])]),r("div",{attrs:{id:"nav"}},[r("div",{staticClass:"container"},[r("router-link",{attrs:{to:"/"}},[r("span",[e._v("首页")])]),e.isLogin?r("router-link",{attrs:{to:"/user"}},[r("span",[e._v("个人中心")])]):e._e()],1)])])},v=[],_=(r("b0c0"),r("cf05")),h=r.n(_),b={data:function(){return{logo:h.a}},computed:{isLogin:function(){return!(""===this.$store.state.userName)},userName:function(){return this.$store.state.userName||"用户请登录："}},created:function(){var e=localStorage.getItem("user_name");e&&this.$store.commit({type:"saveUserName",userName:e})},methods:{gotoLogin:function(){if(this.isLogin)return localStorage.removeItem("user_name"),this.$store.commit("logout"),this.$store.commit("clearCart"),void("Home"!==this.$route.name&&this.$router.push({name:"Home"}));"Login"!==this.$route.name&&this.$router.push({name:"Login"})}}},w=b,x=(r("7529"),Object(c["a"])(w,g,v,!1,null,"67aa1408",null)),y=x.exports,k={components:{Cheader:y}},$=k,D=(r("6ac1"),Object(c["a"])($,p,f,!1,null,"2981d796",null)),C=D.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{attrs:{id:"carousel"}},[r("el-carousel",{attrs:{interval:4e3,type:"card",height:"400px"}},e._l(e.carouselImages,(function(e){return r("el-carousel-item",{key:e},[r("img",{attrs:{width:"100%",src:e}})])})),1)],1),r("div",{staticClass:"goods-container"},e._l(e.arrGoods,(function(t){return r("el-card",{key:t.goods_id,attrs:{"body-style":{padding:"0px"}},nativeOn:{click:function(r){return e.gotoDetail(t.goods_id)}}},[r("img",{attrs:{src:t.goods_imgsrc,width:"100%",alt:t.goods_name}}),r("div",{staticClass:"card-info"},[r("div",{staticClass:"info clearfix"},[r("h3",{staticClass:"price"},[e._v(e._s(e._f("rmb")(t.goods_price)))]),r("span",{staticClass:"name"},[e._v(e._s(t.goods_name))])]),r("span",{staticClass:"description"},[e._v(e._s(t.goods_description))])])])})),1)])},R=[],S=(r("4de4"),r("96cf"),r("1da1")),A=r("a3e0"),j=r.n(A),N=r("ae31"),E=r.n(N),U=r("5635"),G=r.n(U),I=r("862b"),T=r.n(I),q=r("8f03"),L=r.n(q),B=r("d93e"),P=r.n(B);r("b680");function F(e){return"￥".concat((e/100).toFixed(2))}var H={filters:{rmb:F},data:function(){return{carouselImages:[j.a,E.a,G.a,T.a,L.a,P.a],arrGoods:[]}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({url:"/api/goods"});case 2:r=t.sent,e.arrGoods=r.data.arrData.filter((function(e){return 1===e.on_sale}));case 4:case"end":return t.stop()}}),t)})))()},methods:{gotoDetail:function(e){this.$router.push({name:"GoodsDetail",query:{id:e}})}}},J=H,M=(r("7d97"),Object(c["a"])(J,O,R,!1,null,"080e3553",null)),z=M.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-container"},[r("div",{staticClass:"title"},[e._v("用户登录")]),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入用户名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{clearable:"",type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),r("el-form-item",[r("el-button",{staticClass:"btn-login",attrs:{type:"primary"},nativeOn:{click:function(t){return e.onSubmit(t)}}},[e._v("登录")])],1),r("el-form-item",[r("el-button",{staticClass:"btn-register",nativeOn:{click:function(t){return e.gotoRegister(t)}}},[e._v("没有账号？去注册")])],1)],1)],1)},Z=[],K={name:"Login",data:function(){return{form:{name:"",password:""},rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,e.$axios({method:"post",url:"/api/user",data:{user_name:e.form.name,user_password:e.form.password}});case 3:a=t.sent,a.data.ok?(localStorage.setItem("user_name",e.form.name),e.$store.commit({type:"saveUserName",userName:e.form.name}),e.$router.push({name:"Home"})):e.$alert("用户名或密码错误","登录失败",{confirmButtonText:"确定"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},gotoRegister:function(){this.$router.push({name:"Register"})}}},Q=K,V=(r("d6db"),Object(c["a"])(Q,Y,Z,!1,null,null,null)),W=V.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-container"},[r("div",{staticClass:"title"},[e._v("用户注册")]),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"status-icon":"","label-width":"80px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{attrs:{minlength:"2",maxlength:"20",clearable:"",placeholder:"请输入用户名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{clearable:"",type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{label:"确认密码",prop:"password1"}},[r("el-input",{attrs:{clearable:"",type:"password",placeholder:"请再输入一次密码"},model:{value:e.form.password1,callback:function(t){e.$set(e.form,"password1","string"===typeof t?t.trim():t)},expression:"form.password1"}})],1),r("el-form-item",[r("el-button",{staticClass:"btn-register",attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e._v("注册")])],1),r("el-form-item",[r("el-button",{staticClass:"btn-login",nativeOn:{click:function(t){return t.preventDefault(),e.gotoLogin(t)}}},[e._v("已有账号？去登录")])],1)],1)],1)},ee=[],te={name:"Register",data:function(){var e=this,t=function t(r,a,n){clearTimeout(t.timer),""!==a?t.timer=setTimeout(Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(/^[0-9a-zA-Z_]{2,20}$/.test(a)){t.next=3;break}return n(new Error("用户名必须为长度在2到20之间的数字或字母或下划线")),t.abrupt("return");case 3:return t.next=5,e.$axios({url:"/api/user?name=".concat(a)});case 5:if(r=t.sent,!r.data.ok){t.next=9;break}return n(new Error("该用户名已经被注册")),t.abrupt("return");case 9:n();case 10:case"end":return t.stop()}}),t)}))),500):n(new Error("请输入用户名"))},r=function t(r,a,n){clearTimeout(t.timer),""!==a?t.timer=setTimeout((function(){/^[0-9a-zA-Z_]{2,20}$/.test(a)?(""!==e.form.password1&&e.$refs.form.validateField("password1"),n()):n(new Error("密码必须为长度在2到20之间的数字或字母或下划线"))}),500):n(new Error("请输入密码"))},a=function t(r,a,n){clearTimeout(t.timer),""!==a?t.timer=setTimeout((function(){e.form.password!==a&&n(new Error("两次输入的密码不一致")),n()}),499):n(new Error("请再输入一次密码"))};return{form:{name:"",password:"",password1:""},rules:{name:[{validator:t,trigger:"change"}],password:[{validator:r,trigger:"change"}],password1:[{validator:a,trigger:"change"}]}}},methods:{onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,e.$axios({method:"post",url:"/api/register",data:{user_name:e.form.name,user_password:e.form.password}});case 3:a=t.sent,a.data.ok?e.$alert("直接用此账号进行登录？","注册成功",{confirmButtonText:"确定"}).then((function(){localStorage.setItem("user_name",e.form.name),e.$store.commit({type:"saveUserName",userName:e.form.name}),e.$router.push({name:"Home"})}),(function(){console.log("继续注册账号")})):e.$alert("服务器发生未知错误","注册失败",{confirmButtonText:"确定"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},gotoLogin:function(){this.$router.push({name:"Login"})}}},re=te,ae=(r("2cfd"),Object(c["a"])(re,X,ee,!1,null,null,null)),ne=ae.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-container"},[r("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"购物车",name:"first"}},[r("div",{staticClass:"cart"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.arrCartData,stripe:"",border:""}},[r("el-table-column",{attrs:{prop:"name",label:"商品名"}}),r("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.price)))]}}])}),r("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{min:0,max:10},on:{change:function(r){return e.handleChange(r,t.$index)}},model:{value:t.row.num,callback:function(r){e.$set(t.row,"num",r)},expression:"scope.row.num"}})]}}])}),r("el-table-column",{attrs:{label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.price*t.row.num)))]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteRow(t.$index)}}},[e._v("移除")])]}}])})],1),r("div",{staticClass:"op-container"},[r("div",[e._v("商品项："+e._s(e.arrCartData.length))]),r("div",[e._v("价格总计："+e._s(e._f("rmb")(e.total)))]),r("div",[e._v(" 订单备注： "),r("el-input",{staticClass:"order-remark",attrs:{type:"textarea",rows:1,placeholder:"请输入订单备注"},model:{value:e.orderRemark,callback:function(t){e.orderRemark=t},expression:"orderRemark"}})],1),r("div",[e._v(" 当前默认收货地址： "),e.defaultAddress?r("span",[e._v(e._s(e.defaultAddress.receiver_address)+" | "+e._s(e.defaultAddress.receiver_name)+" | "+e._s(e.defaultAddress.receiver_phone))]):r("span",[e._v("暂无默认地址")])]),r("el-button",{staticClass:"btn-buy",attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.buyGoods(t)}}},[e._v("确认下单")])],1)],1)]),r("el-tab-pane",{attrs:{label:"收货地址",name:"second"}},[r("div",{staticClass:"default-address-title"},[e._v("默认地址：")]),r("div",{staticClass:"default-address"},[e.defaultAddress?r("div",[e._v(e._s(e.defaultAddress.receiver_address)+" | "+e._s(e.defaultAddress.receiver_name)+" | "+e._s(e.defaultAddress.receiver_phone))]):r("div",[e._v("暂无默认地址")])]),r("div",{staticClass:"other-address-title"},[e._v("其他地址：")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.otherAddress,stripe:"",border:""}},[r("el-table-column",{attrs:{prop:"receiver_address",label:"地址",width:"300px"}}),r("el-table-column",{attrs:{prop:"receiver_name",label:"收货人"}}),r("el-table-column",{attrs:{prop:"receiver_phone",label:"手机号码"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},nativeOn:{click:function(r){return r.preventDefault(),e.setDefaultAddress(t.row.id)}}},[e._v("设为默认")]),e._v(" "),r("el-button",{attrs:{type:"text"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteAddress(t.row.id)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"add-address"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.addAddress(t)}}},[e._v("新增地址")])],1)],1),r("el-tab-pane",{attrs:{label:"历史订单",name:"third"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData,"row-class-name":e.tableRowClassName,border:""}},[r("el-table-column",{attrs:{prop:"order_num",label:"订单号"}}),r("el-table-column",{attrs:{prop:"order_datetime",label:"下单时间"}}),r("el-table-column",{attrs:{prop:"order_remark",label:"订单备注"}}),r("el-table-column",{attrs:{label:"是否被管理员处理"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.is_handle?"已处理":"未处理"))]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},nativeOn:{click:function(r){return r.preventDefault(),e.checkOrdersDetail(t.row.order_num)}}},[e._v("查看详细信息")]),e._v(" "),t.row.is_handle?r("el-button",{attrs:{type:"text"},nativeOn:{click:function(r){return r.preventDefault(),e.deleteOrder(t.row.order_num)}}},[e._v("删除此条订单")]):e._e()]}}])})],1)],1)],1)],1)},oe=[],ie=(r("c740"),r("4160"),r("d81d"),r("a434"),r("159b"),{filters:{rmb:F},data:function(){return{activeName:"first",orderRemark:"",defaultAddress:null,otherAddress:null,orderData:null}},computed:{total:function(){var e=0;return this.$store.state.arrCartData.forEach((function(t){e+=t.price*t.num})),e},arrCartData:function(){return this.$store.state.arrCartData}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$route.query.active&&(e.activeName=e.$route.query.active),r=e.$store.state.userName,t.next=4,e.$axios({url:"/api/receiver?name=".concat(r)});case 4:a=t.sent,a.data.ok&&(n=a.data.addressData,s=n.defaultAddress,o=n.otherAddress,e.defaultAddress=s,e.otherAddress=o),e.getHistoryOrders();case 7:case"end":return t.stop()}}),t)})))()},methods:{handleClick:function(e,t){},deleteRow:function(e){this.$store.commit({type:"deleteGoods",index:e})},handleChange:function(e,t){0===e&&this.deleteRow(t)},buyGoods:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.$store.state.userName,a=e.$store.state.arrCartData.map((function(e){return{id:e.id,num:e.num}})),0!==a.length){t.next=5;break}return e.$message({message:"请勿提交空订单",type:"warning"}),t.abrupt("return");case 5:if(e.defaultAddress){t.next=8;break}return e.$confirm("您还未设置默认收货地址，现在去设置？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push({name:"AddAddress"})}),(function(){})),t.abrupt("return");case 8:return t.next=10,e.$axios({method:"post",url:"/api/order",data:{user_name:r,order_remark:e.orderRemark,receiver_id:e.defaultAddress.id,arrCartData:a}});case 10:if(n=t.sent,!n.data.ok){t.next=18;break}return e.$message({message:"成功提交订单",type:"success"}),e.$store.commit("clearCart"),t.next=16,e.getHistoryOrders();case 16:return e.activeName="third",t.abrupt("return");case 18:e.$message({message:"提交订单失败",type:"error"});case 19:case"end":return t.stop()}}),t)})))()},setDefaultAddress:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function r(){var a,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t.$store.state.userName,r.next=3,t.$axios({method:"put",url:"/api/receiver",data:{id:e,user_name:a}});case 3:if(n=r.sent,!n.data.ok){r.next=13;break}t.$message({message:"设置默认地址成功",type:"success"}),s=t.otherAddress.findIndex((function(t){return t.id===e})),o=t.defaultAddress,t.defaultAddress=t.otherAddress.splice(s,1)[0],s=0;while(s<t.otherAddress.length&&t.otherAddress[s++].id<o.id);return t.otherAddress.splice(s,0,o),r.abrupt("return");case 13:t.$message({message:"设置默认地址失败",type:"error"});case 14:case"end":return r.stop()}}),r)})))()},deleteAddress:function(e){var t=this;this.$confirm("您确认要删除这一条收货地址吗？","删除收货地址",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(S["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios({method:"delete",url:"/api/receiver?id=".concat(e)});case 2:if(a=r.sent,!a.data.ok){r.next=8;break}return t.$message({message:"成功删除此条收货地址",type:"success"}),n=t.otherAddress.findIndex((function(t){return t.id===e})),t.otherAddress.splice(n,1),r.abrupt("return");case 8:t.$message({message:"删除收货地址失败",type:"error"});case 9:case"end":return r.stop()}}),r)}))),(function(){}))},addAddress:function(){this.$router.push({name:"AddAddress"})},tableRowClassName:function(e){var t=e.row;return t.is_handle?"":"not-handle"},checkOrdersDetail:function(e){this.$router.push({name:"OrderDetail",query:{id:e}})},deleteOrder:function(e){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("此操作将删除该条订单记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(S["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios({method:"delete",url:"/api/order?num=".concat(e)});case 2:if(a=r.sent,!a.data.ok){r.next=8;break}return t.$message({message:"删除成功",type:"success"}),n=t.orderData.findIndex((function(t){return t.order_num===e})),t.orderData.splice(n,1),r.abrupt("return");case 8:t.$message({message:"删除失败",type:"error"});case 9:case"end":return r.stop()}}),r)}))),(function(){}));case 1:case"end":return r.stop()}}),r)})))()},getHistoryOrders:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.state.userName,t.next=3,e.$axios({url:"/api/order?name=".concat(r)});case 3:a=t.sent,a.data.ok&&(e.orderData=a.data.orderData);case 5:case"end":return t.stop()}}),t)})))()}}}),ce=ie,ue=(r("e8c3"),Object(c["a"])(ce,se,oe,!1,null,null,null)),le=ue.exports,de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-address-container"},[r("div",{staticClass:"head"},[r("div",{staticClass:"title"},[e._v("添加收货地址")]),r("el-button",{nativeOn:{click:function(t){return e.goBack(t)}}},[e._v("< 返回收货地址")])],1),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"收货地址",prop:"address"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入收货地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"===typeof t?t.trim():t)},expression:"form.address"}})],1),r("el-form-item",{attrs:{label:"收货人姓名",prop:"name"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入收货人姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入手机号码"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),r("el-form-item",[r("el-button",{staticClass:"btn-login",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("添加")])],1)],1)],1)},me=[],pe={data:function(){var e=function(e,t,r){""===t?r("请输入手机号码"):/^1[3-9]\d{9}$/.test(t)?r():r("手机号格式不正确")};return{form:{address:"重庆市沙坪坝区重庆师范大学大学城校区",name:"段金江",phone:"17754927797"},rules:{address:[{required:!0,message:"请输入收货地址",trigger:"blur"}],name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],phone:[{validator:e,required:!0,trigger:"blur"}]}}},methods:{goBack:function(){this.$router.push({name:"User",query:{active:"second"}})},onSubmit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(S["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=12;break}return a=e.$store.state.userName,n=e.form.name,s=e.form.address,o=e.form.phone,t.next=7,e.$axios({method:"post",url:"/api/receiver",data:{user_name:a,receiver_name:n,receiver_address:s,receiver_phone:o}});case 7:if(i=t.sent,!i.data.ok){t.next=11;break}return e.$message({message:"收货地址添加成功",type:"success"}),t.abrupt("return");case 11:e.$message({message:"收货地址添加失败",type:"error"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},gotoRegister:function(){this.$router.push({name:"Register"})}}},fe=pe,ge=(r("f446"),Object(c["a"])(fe,de,me,!1,null,null,null)),ve=ge.exports,_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-detail"},[r("el-button",{nativeOn:{click:function(t){return t.preventDefault(),e.goBack(t)}}},[e._v("< 返回历史订单")]),r("div",{staticClass:"head"},[r("div",{staticClass:"title"},[e._v("订单详情")]),r("div",[e._v("订单号："+e._s(e.order_num))])]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodsData,stripe:"",border:""}},[r("el-table-column",{attrs:{prop:"goods_name",label:"商品名"}}),r("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.goods_price)))]}}])}),r("el-table-column",{attrs:{prop:"goods_number",label:"数量"}}),r("el-table-column",{attrs:{label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.goods_price*t.row.goods_number)))]}}])})],1),r("div",{staticClass:"total"},[e._v("总计："+e._s(e._f("rmb")(e.total)))]),r("div",{staticClass:"receiver-info"},[e._v("收货信息： "+e._s(e.receiver_address)+" | "+e._s(e.receiver_name)+" | "+e._s(e.receiver_phone))]),r("div",{staticClass:"delivery"},[e._v(" 物流单号： "),e.delivery_num?e._e():r("span",[e._v("暂时没有物流信息")]),r("span",[e._v(e._s(e.delivery_num))])])],1)},he=[],be={filters:{rmb:F},data:function(){return{order_num:0,goodsData:[],delivery_num:null,receiver_address:"",receiver_name:"",receiver_phone:""}},computed:{total:function(){var e=0;return this.goodsData.forEach((function(t){e+=t.goods_price*t.goods_number})),e}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.order_num=e.$route.query.id,t.next=3,e.$axios({url:"/api/orderdetail?num=".concat(e.order_num)});case 3:r=t.sent,r.data.ok&&(e.goodsData=r.data.goodsData,e.delivery_num=r.data.delivery_num,e.receiver_address=r.data.receiver_address,e.receiver_name=r.data.receiver_name,e.receiver_phone=r.data.receiver_phone);case 5:case"end":return t.stop()}}),t)})))()},methods:{goBack:function(){this.$router.push({name:"User",query:{active:"third"}})}}},we=be,xe=(r("9aff"),Object(c["a"])(we,_e,he,!1,null,"391e9392",null)),ye=xe.exports,ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods-detail-container"},[r("div",{staticClass:"container"},[r("div",{staticClass:"left"},[r("img",{attrs:{src:e.goods_imgsrc}})]),r("div",{staticClass:"right"},[r("span",[e._v("商品名："+e._s(e.goods_name))]),r("br"),r("span",[e._v("商品描述："+e._s(e.goods_description))]),r("br"),r("span",[e._v("单价："+e._s(e._f("rmb")(e.goods_price)))]),r("br"),r("span",[e._v("购买数量：")]),r("el-input-number",{attrs:{min:1,max:10},model:{value:e.goodsNum,callback:function(t){e.goodsNum=t},expression:"goodsNum"}}),r("div",{staticClass:"btn-container"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addToCart(t)}}},[e._v("加入购物车")]),r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.gotoCart(t)}}},[e._v("去购物车结算")])],1)],1)])])},$e=[],De={filters:{rmb:F},data:function(){return{goodsNum:1,goods_name:"信阳毛尖500",goods_price:5e4,goods_description:"刚刚上架的新茶，一斤500元，欢迎各位购买品尝。",goods_imgsrc:""}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.query.id,t.next=3,e.$axios({url:"/api/goods?id=".concat(r)});case 3:a=t.sent,a.data.ok&&(e.goods_name=a.data.goods_name,e.goods_price=a.data.goods_price,e.goods_description=a.data.goods_description,e.goods_imgsrc=a.data.goods_imgsrc);case 5:case"end":return t.stop()}}),t)})))()},methods:{addToCart:function(){this.$store.commit({type:"addGoods",data:{id:this.$route.query.id,name:this.goods_name,price:this.goods_price,num:this.goodsNum}}),this.$message({message:"成功将 ".concat(this.goodsNum," 件商品添加到购物车"),type:"success"})},gotoCart:function(){this.$router.push({name:"User"})}}},Ce=De,Oe=(r("ad13"),Object(c["a"])(Ce,ke,$e,!1,null,"4101e34e",null)),Re=Oe.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"admin"}},[r("el-container",[r("aheader"),r("el-main",[r("router-view")],1),r("el-footer",[e._v(" 重庆师范大学计算机与信息科学学院16级计算机科学与技术 段金江制作 "),r("br"),e._v(" Copyright © 2019 - "+e._s((new Date).getFullYear())+" Duan Jinjiang. All Rights Reserved. ")])],1)],1)},Ae=[],je=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-header",{attrs:{height:"230px"}},[r("div",{staticClass:"banner-container"},[r("div",{staticClass:"container banner clearfix"},[r("div",{attrs:{id:"logo"}},[r("img",{attrs:{src:e.logo}})]),r("div",{attrs:{id:"title-content"}},[e._v("信阳毛尖后台管理")]),r("div",{attrs:{id:"user-box"}},[e._v(" 管理员 "+e._s(e.username)+" 欢迎您 "),r("el-button",{nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)])]),r("div",{attrs:{id:"nav"}},[r("div",{staticClass:"container"},[r("router-link",{attrs:{to:{name:"Admin"}}},[r("span",[e._v("商品管理")])]),r("router-link",{attrs:{to:{name:"Orders"}}},[r("span",[e._v("订单管理")])])],1)])])},Ne=[],Ee={data:function(){return{logo:h.a,username:"admin"}},methods:{logout:function(){localStorage.removeItem("admin"),this.$router.push({name:"AdminLogin"})}}},Ue=Ee,Ge=(r("3a12"),Object(c["a"])(Ue,je,Ne,!1,null,"1ce7a5fe",null)),Ie=Ge.exports,Te={name:"Admin",components:{Aheader:Ie},data:function(){return{}},methods:{logOut:function(){localStorage.removeItem("admin"),this.$router.push("/admin/login")}}},qe=Te,Le=(r("7727"),Object(c["a"])(qe,Se,Ae,!1,null,"0a46cd60",null)),Be=Le.exports,Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"admin-login"}},[r("div",{staticClass:"container"},[r("h1",[e._v("管理员登录")]),e._v("管理员账号： "),r("el-input",{attrs:{placeholder:"请输入管理员账号"},model:{value:e.adminName,callback:function(t){e.adminName=t},expression:"adminName"}}),r("br"),e._v("管理员密码： "),r("el-input",{attrs:{type:"password",placeholder:"请输入管理员密码"},model:{value:e.adminPass,callback:function(t){e.adminPass=t},expression:"adminPass"}}),r("br"),r("el-button",{nativeOn:{click:function(t){return e.checkUser(t)}}},[e._v("登录")]),r("br"),e._v(" "+e._s(e.msg)+" ")],1)])},Fe=[],He={data:function(){return{adminName:"",adminPass:"",msg:""}},created:function(){var e=localStorage.getItem("admin");e&&this.$router.push("/admin")},methods:{checkUser:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({method:"post",url:"/api/admin",data:{adminName:e.adminName,adminPass:e.adminPass}});case 2:r=t.sent,r.data.ok?(localStorage.setItem("admin","admin"),e.$router.push("/admin")):e.msg="管理员用户名或者密码错误";case 4:case"end":return t.stop()}}),t)})))()}}},Je=He,Me=(r("b9f5"),Object(c["a"])(Je,Pe,Fe,!1,null,"035d9eda",null)),ze=Me.exports,Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods-container"},[r("el-button",{staticStyle:{"margin-bottom":"10px"},nativeOn:{click:function(t){return e.gotoAddGoods(t)}}},[e._v("新增商品")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.arrGoodsData,border:"","row-class-name":e.tableRowClassName}},[r("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{attrs:{src:"../"+e.row.goods_imgsrc,width:"100%",alt:e.row.imgsrc}})]}}])}),r("el-table-column",{attrs:{prop:"goods_id",label:"商品编号"}}),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名"}}),r("el-table-column",{attrs:{prop:"goods_description",label:"描述"}}),r("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.goods_price)))]}}])}),r("el-table-column",{attrs:{label:"销售状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.on_sale?"在售":"下架"))]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},nativeOn:{click:function(r){return e.gotoEditGoods(t.row.goods_id)}}},[e._v("编辑商品")])]}}])})],1)],1)},Ze=[],Ke={name:"Goods",filters:{rmb:F},data:function(){return{arrGoodsData:[]}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({url:"/api/goods"});case 2:r=t.sent,e.arrGoodsData=r.data.arrData;case 4:case"end":return t.stop()}}),t)})))()},methods:{tableRowClassName:function(e){var t=e.row;return t.on_sale?"":"offsale"},gotoEditGoods:function(e){this.$router.push({name:"EditGoods",query:{id:e}})},gotoAddGoods:function(){this.$router.push({name:"AddGoods"})}}},Qe=Ke,Ve=(r("8229"),Object(c["a"])(Qe,Ye,Ze,!1,null,null,null)),We=Ve.exports,Xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"edit-goods-container"},[r("el-button",{nativeOn:{click:function(t){return e.$router.push({name:"Admin"})}}},[e._v("< 返回商品管理")]),r("div",{staticClass:"title"},[e._v("编辑商品")]),r("div",{staticClass:"content clearfix"},[e._m(0),r("div",{staticClass:"right"},[r("div",[r("el-input",{attrs:{placeholder:"请输入商品名"},model:{value:e.goodsData.goods_name,callback:function(t){e.$set(e.goodsData,"goods_name",t)},expression:"goodsData.goods_name"}})],1),r("div",[r("el-input",{attrs:{placeholder:"请输入商品描述信息"},model:{value:e.goodsData.goods_description,callback:function(t){e.$set(e.goodsData,"goods_description",t)},expression:"goodsData.goods_description"}})],1),r("div",[r("el-input",{attrs:{placeholder:"请输入商品价格"},model:{value:e.goodsData.goods_price,callback:function(t){e.$set(e.goodsData,"goods_price",e._n(t))},expression:"goodsData.goods_price"}}),e._v("（单位：分） ")],1),r("div",[r("el-switch",{attrs:{"active-text":"在售","inactive-text":"下架"},model:{value:e.goodsData.isSale,callback:function(t){e.$set(e.goodsData,"isSale",t)},expression:"goodsData.isSale"}})],1),r("div",[r("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/api/editgoods","show-file-list":!1,"auto-upload":!1,"on-success":e.handleAvatarSuccess,"on-change":e.change,data:e.goodsData}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl},on:{click:e.clearFiles}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),r("div",[r("el-button",{nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提交编辑")])],1)])],1)},et=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"left"},[r("div",[e._v("商品名：")]),r("div",[e._v("描述信息：")]),r("div",[e._v("价格：")]),r("div",[e._v("是否在售：")]),r("div",[e._v("图片：")])])}],tt=(r("d3b7"),r("3ca3"),r("498a"),r("ddb0"),r("2b3d"),{name:"AddGoods",data:function(){return{goodsData:{goods_id:-1,goods_name:"",goods_description:"",goods_price:"",isSale:!0},imageUrl:"",success:!1,selectImg:!1}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.query.id,t.next=3,e.$axios({url:"/api/goods?id=".concat(r)});case 3:a=t.sent,e.goodsData.goods_id=a.data.goods_id,e.goodsData.goods_name=a.data.goods_name,e.goodsData.goods_description=a.data.goods_description,e.goodsData.goods_price=a.data.goods_price,e.goodsData.isSale=!!a.data.on_sale,e.imageUrl="../../"+a.data.goods_imgsrc;case 10:case"end":return t.stop()}}),t)})))()},methods:{handleAvatarSuccess:function(e,t){e.ok?this.$message({message:"编辑商品成功！",type:"success"}):this.$message({message:"编辑商品失败！",type:"success"}),this.success=!0,this.selectImg=!1},change:function(e){this.imageUrl=URL.createObjectURL(e.raw),this.success&&(this.$refs.upload.clearFiles(),this.success=!1)},submit:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.goodsData,a=r.goods_name,n=r.goods_description,s=r.goods_price,""!==a.trim()){t.next=4;break}return e.$message({message:"请输入商品名",type:"warning"}),t.abrupt("return");case 4:if(""!==n.trim()){t.next=7;break}return e.$message({message:"请输入商品描述信息",type:"warning"}),t.abrupt("return");case 7:if(""!==String(s).trim()){t.next=10;break}return e.$message({message:"请输入商品价格",type:"warning"}),t.abrupt("return");case 10:if("number"===typeof e.goodsData.goods_price){t.next=13;break}return e.$message({message:"商品价格必须为数字",type:"warning"}),t.abrupt("return");case 13:if(e.imageUrl){t.next=16;break}return e.$message({message:"请选择商品图片",type:"warning"}),t.abrupt("return");case 16:if(e.selectImg){t.next=23;break}return t.next=19,e.$axios({method:"post",url:"/api/editgoods",data:{goods_id:e.goodsData.goods_id,goods_name:e.goodsData.goods_name,goods_description:e.goodsData.goods_description,goods_price:e.goodsData.goods_price,isSale:e.goodsData.isSale}});case 19:return o=t.sent,o.data.ok?e.$message({message:"编辑商品成功！",type:"success"}):e.$message({message:"编辑商品失败！",type:"error"}),e.success=!0,t.abrupt("return");case 23:e.$refs.upload.submit();case 24:case"end":return t.stop()}}),t)})))()},clearFiles:function(){this.selectImg=!0,this.imageUrl="",this.$refs.upload.clearFiles()}}}),rt=tt,at=(r("d9fb"),Object(c["a"])(rt,Xe,et,!1,null,null,null)),nt=at.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-goods-container"},[r("el-button",{nativeOn:{click:function(t){return e.$router.push({name:"Admin"})}}},[e._v("< 返回商品管理")]),r("div",{staticClass:"title"},[e._v("新增商品")]),r("div",{staticClass:"content clearfix"},[e._m(0),r("div",{staticClass:"right"},[r("div",[r("el-input",{attrs:{placeholder:"请输入商品名"},model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),r("div",[r("el-input",{attrs:{placeholder:"请输入商品描述信息"},model:{value:e.goodsData.description,callback:function(t){e.$set(e.goodsData,"description",t)},expression:"goodsData.description"}})],1),r("div",[r("el-input",{attrs:{placeholder:"请输入商品价格"},model:{value:e.goodsData.price,callback:function(t){e.$set(e.goodsData,"price",e._n(t))},expression:"goodsData.price"}}),e._v("（单位：分） ")],1),r("div",[r("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"/api/addgoods","show-file-list":!1,"auto-upload":!1,"on-success":e.handleAvatarSuccess,"on-change":e.change,data:e.goodsData}},[e.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.imageUrl},on:{click:e.clearFiles}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)]),r("div",[r("el-button",{nativeOn:{click:function(t){return e.submit(t)}}},[e._v("提交新增")])],1)])],1)},ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"left"},[r("div",[e._v("商品名：")]),r("div",[e._v("描述信息：")]),r("div",[e._v("价格：")]),r("div",[e._v("图片：")])])}],it=(r("a4d3"),r("e01a"),{name:"AddGoods",data:function(){return{goodsData:{name:"",description:"",price:""},imageUrl:"",success:!1}},methods:{handleAvatarSuccess:function(e,t){e.ok?this.$message({message:"新增商品成功！",type:"success"}):this.$message({message:"新增商品失败！",type:"error"}),this.goodsData.name=this.goodsData.description=this.goodsData.price="",this.success=!0},change:function(e){this.imageUrl=URL.createObjectURL(e.raw),this.success&&(this.clearFiles(),this.success=!1)},submit:function(){var e=this.goodsData,t=e.name,r=e.description,a=e.price;""!==t.trim()?""!==r.trim()?""!==String(a).trim()?"number"===typeof this.goodsData.price?this.imageUrl?this.$refs.upload.submit():this.$message({message:"请选择商品图片",type:"warning"}):this.$message({message:"商品价格必须为数字",type:"warning"}):this.$message({message:"请输入商品价格",type:"warning"}):this.$message({message:"请输入商品描述信息",type:"warning"}):this.$message({message:"请输入商品名",type:"warning"})},clearFiles:function(){this.imageUrl="",this.$refs.upload.clearFiles()}}}),ct=it,ut=(r("5c05"),Object(c["a"])(ct,st,ot,!1,null,null,null)),lt=ut.exports,dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"orders-container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData,border:"","row-class-name":e.tableRowClassName}},[r("el-table-column",{attrs:{prop:"order_num",label:"订单号"}}),r("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),r("el-table-column",{attrs:{prop:"order_datetime",label:"下单时间"}}),r("el-table-column",{attrs:{prop:"order_remark",label:"订单备注"}}),r("el-table-column",{attrs:{label:"是否处理"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.is_handle?"已处理":"未处理"))]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},nativeOn:{click:function(r){return e.gotoEditOrder(t.row.order_num)}}},[e._v("查看订单详细信息")])]}}])})],1)],1)},mt=[],pt=(r("99af"),{name:"Orders",data:function(){return{orderData:[{order_num:1,user_name:"duan",order_datetime:"2020-04-01 20:03",order_remark:"快递发顺丰",is_handle:!1}]}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({url:"/api/order"});case 2:r=t.sent,r.data.ok&&(a=[],n=[],r.data.orderData.forEach((function(e){e.is_handle?a.push(e):n.push(e)})),e.orderData=n.concat(a.reverse()));case 4:case"end":return t.stop()}}),t)})))()},methods:{tableRowClassName:function(e){var t=e.row;if(!t.is_handle)return"not-handle"},gotoEditOrder:function(e){this.$router.push({name:"EditOrder",query:{id:e}})}}}),ft=pt,gt=(r("a633"),Object(c["a"])(ft,dt,mt,!1,null,null,null)),vt=gt.exports,_t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-detail"},[r("el-button",{nativeOn:{click:function(t){return e.goBack(t)}}},[e._v("< 返回订单管理")]),r("div",{staticClass:"head"},[r("div",{staticClass:"title"},[e._v("订单详情")]),r("div",[e._v("订单号："+e._s(e.orderNum))])]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.goodsData,stripe:"",border:""}},[r("el-table-column",{attrs:{prop:"goods_name",label:"商品名"}}),r("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.goods_price)))]}}])}),r("el-table-column",{attrs:{prop:"goods_number",label:"数量"}}),r("el-table-column",{attrs:{label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("rmb")(t.row.goods_price*t.row.goods_number)))]}}])})],1),r("div",{staticClass:"total"},[e._v("总计："+e._s(e._f("rmb")(e.total)))]),r("div",{staticClass:"receiver-info"},[e._v("收货信息："+e._s(e.receiver_address)+" | "+e._s(e.receiver_name)+" | "+e._s(e.receiver_phone))]),r("div",{staticClass:"delivery"},[e._v(" 物流单号： "),r("el-input",{attrs:{placeholder:"请录入物流单号"},model:{value:e.delivery_num,callback:function(t){e.delivery_num=t},expression:"delivery_num"}}),r("el-button",{nativeOn:{click:function(t){return e.handleOrder(t)}}},[e._v("确定录入")])],1)],1)},ht=[],bt={filters:{rmb:F},data:function(){return{orderNum:0,goodsData:[{goods_name:"信阳毛尖500",goods_price:5e4,goods_number:5}],delivery_num:"",receiver_address:"",receiver_name:"",receiver_phone:""}},computed:{total:function(){var e=0;return this.goodsData.forEach((function(t){e+=t.goods_price*t.goods_number})),e}},created:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.orderNum=e.$route.query.id,t.next=3,e.$axios({url:"/api/orderdetail?num=".concat(e.orderNum)});case 3:r=t.sent,r.data.ok&&(e.goodsData=r.data.goodsData,e.delivery_num=r.data.delivery_num||"",e.receiver_address=r.data.receiver_address,e.receiver_name=r.data.receiver_name,e.receiver_phone=r.data.receiver_phone);case 5:case"end":return t.stop()}}),t)})))()},methods:{goBack:function(){this.$router.push({name:"Orders"})},handleOrder:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.delivery_num.trim()){t.next=3;break}return e.$message({message:"请不要提交空的物流单号",type:"warning"}),t.abrupt("return");case 3:return t.next=5,e.$axios({method:"patch",url:"/api/order",data:{order_num:e.$route.query.id,delivery_num:e.delivery_num}});case 5:if(r=t.sent,!r.data.ok){t.next=9;break}return e.$message({message:"成功处理此订单",type:"success"}),t.abrupt("return");case 9:e.$message({message:"处理此订单失败",type:"error"});case 10:case"end":return t.stop()}}),t)})))()}}},wt=bt,xt=(r("506f"),Object(c["a"])(wt,_t,ht,!1,null,"43428740",null)),yt=xt.exports;a["default"].use(m["a"]);var kt=[{path:"/",component:C,children:[{path:"",name:"Home",component:z},{path:"login",name:"Login",component:W},{path:"register",name:"Register",component:ne},{path:"user",name:"User",component:le,beforeEnter:function(e,t,r){if(localStorage.getItem("user_name"))return r();r("/login")}},{path:"address",name:"AddAddress",component:ve,beforeEnter:function(e,t,r){if(localStorage.getItem("user_name"))return r();r("/login")}},{path:"order",name:"OrderDetail",component:ye,beforeEnter:function(e,t,r){if(localStorage.getItem("user_name"))return r();r("/login")}},{path:"detail",name:"GoodsDetail",component:Re,beforeEnter:function(e,t,r){if(localStorage.getItem("user_name"))return r();r("/login")}}]},{path:"/admin",component:Be,beforeEnter:function(e,t,r){if(localStorage.getItem("admin"))return r();r("/admin/login")},children:[{path:"",name:"Admin",component:We},{path:"editgoods",name:"EditGoods",component:nt},{path:"addgoods",name:"AddGoods",component:lt},{path:"orders",name:"Orders",component:vt},{path:"eidtorder",name:"EditOrder",component:yt}]},{path:"/admin/login",name:"AdminLogin",component:ze}],$t=new m["a"]({mode:"history",base:"/",routes:kt}),Dt=$t,Ct=r("bc3a"),Ot=r.n(Ct),Rt=r("2f62");a["default"].use(Rt["a"]);var St=new Rt["a"].Store({state:{userName:"",arrCartData:[]},mutations:{saveUserName:function(e,t){e.userName=t.userName},logout:function(e){e.userName=""},addGoods:function(e,t){var r=e.arrCartData.findIndex((function(e){return e.id===t.data.id}));-1!==r?e.arrCartData[r].num+=t.data.num:e.arrCartData.push(t.data)},deleteGoods:function(e,t){e.arrCartData.splice(t.index,1)},clearCart:function(e){e.arrCartData.splice(0,e.arrCartData.length)}}}),At=St;a["default"].prototype.$axios=Ot.a,a["default"].config.productionTip=!1,a["default"].use(s.a),new a["default"]({router:Dt,store:At,render:function(e){return e(d)}}).$mount("#app")},"5c05":function(e,t,r){"use strict";var a=r("a8d9"),n=r.n(a);n.a},"604f":function(e,t,r){},"6ac1":function(e,t,r){"use strict";var a=r("604f"),n=r.n(a);n.a},7529:function(e,t,r){"use strict";var a=r("0d79"),n=r.n(a);n.a},7727:function(e,t,r){"use strict";var a=r("c1d6"),n=r.n(a);n.a},"7be2":function(e,t,r){},"7d97":function(e,t,r){"use strict";var a=r("8ee1"),n=r.n(a);n.a},8229:function(e,t,r){"use strict";var a=r("1b3c"),n=r.n(a);n.a},"85ec":function(e,t,r){},"862b":function(e,t,r){e.exports=r.p+"img/c8.376197dc.jpg"},"8ee1":function(e,t,r){},"8f03":function(e,t,r){e.exports=r.p+"img/c9.dedbaf64.jpg"},"9aff":function(e,t,r){"use strict";var a=r("0e22"),n=r.n(a);n.a},a3e0:function(e,t,r){e.exports=r.p+"img/c5.7d9daadb.jpg"},a633:function(e,t,r){"use strict";var a=r("cb1c"),n=r.n(a);n.a},a8d9:function(e,t,r){},ad13:function(e,t,r){"use strict";var a=r("181f"),n=r.n(a);n.a},ad9d:function(e,t,r){},ae31:function(e,t,r){e.exports=r.p+"img/c6.8bf6f824.jpg"},b9f5:function(e,t,r){"use strict";var a=r("e298"),n=r.n(a);n.a},c1d6:function(e,t,r){},cb1c:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.53fc3daa.png"},d053:function(e,t,r){},d6db:function(e,t,r){"use strict";var a=r("e67a"),n=r.n(a);n.a},d93e:function(e,t,r){e.exports=r.p+"img/c10.7743b0ba.jpg"},d9fb:function(e,t,r){"use strict";var a=r("d053"),n=r.n(a);n.a},e298:function(e,t,r){},e314:function(e,t,r){},e67a:function(e,t,r){},e8c3:function(e,t,r){"use strict";var a=r("7be2"),n=r.n(a);n.a},f446:function(e,t,r){"use strict";var a=r("376b"),n=r.n(a);n.a}});
//# sourceMappingURL=app.3b2cdbc8.js.map